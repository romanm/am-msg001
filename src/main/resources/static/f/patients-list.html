<!DOCTYPE html>
<html  data-ng-app="myApp" data-ng-controller="myCtrl" lang="uk-UA">
<title>РІС список пацієнтів</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8" />
<script src="/webjars/angularjs/1.7.4/angular.min.js"></script>
<script src="/webjars/angularjs/1.7.4/angular-sanitize.min.js"></script>
<script src="/webjars/angularjs/1.7.4/i18n/angular-locale_uk.js"></script>
<script src="/f/js/am-ris001.js"></script>
<script src="/f/patients-list.js"></script>
<link rel="stylesheet" href="/f/css/w3.css">
<link rel="stylesheet" href="/f/css/am.css">
<link rel="stylesheet"
	href="/webjars/font-awesome/4.7.0/css/font-awesome.min.css">
<body>
	<div class="w3-row w3-light-grey">
		<div class="w3-col w3-container" style="width: 20%">
			<a href="/" class=" w3-btn w3-hover-shadow"> <i
				class="fa fa-home w3-large w3-border" aria-hidden="true"></i>
			</a>
		</div>
		<div class="w3-col  w3-center" style="width: 60%">
			<p>РІС список пацієнтів</p>
		</div>
		<div class="w3-col w3-container w3-right-align" style="width: 20%">
			<span ng-include="'/f/login-link.html'"> </span>
		</div>
	</div>
	<div class="w3-container">
		<div class="w3-row w3-tiny">
			<div class="w3-half w3-container ">list: {{firstName}}
				{{lastName}} | {{lastDbRead.lastCallTime | date : 'medium'}}</div>
			<div class="w3-half w3-container">
				<a ng-if="!principal.name" href="/f/login.html"> логін </a> <a
					ng-if="'admin'==principal.name" href="/f/admin.html">адніністратор</a>
				<div class="w3-right">
					<a href="#" ng-click="db_validation.removeDupletRows()"
						class="w3-btn" ng-if="db_validation.duplet_rows_count>0">
						{{db_validation.duplet_rows_count}} - дуплет для видаленя</a> <a
						href="#" ng-click="lastDbRead.reread()" class="w3-btn">reread
						DB - last record <sup ng-if="lastDbRead.importCnt>0">{{lastDbRead.importCnt}}</sup>
					</a> <span ng-if="lastDbRead.maxInDB">{{lastDbRead.maxInDB |
						date : 'medium'}}</span>
				</div>
			</div>
		</div>
		<div class="w3-center w3-tiny">
			<a class="w3-btn w3-padding-small"
				href="?addDay={{date.addDayUrl(-1)}}"><</a> {{date.seekDay |
			date : 'mediumDate'}} <a href="?addDay={{date.addDayUrl(1)}}"
				class="w3-btn w3-padding-small">></a> 
			<a href="?"
				class="w3-btn w3-padding-small"> сьогодні: {{date.today | date :
				'shortDate'}} </a>
		</div>
	</div>
	<div class="w3-container" ng-if="principal.name">
		<table data-ng-repeat="o in [patientList]"
			style="margin-left: auto; margin-right: auto;">
			<caption>
				<div class="w3-row w3-section">
					<div class="w3-col w3-text-gray" style="width: 20px">
						<sub> {{patientList.pl.list.length}} </sub>
					</div>
					<div class="w3-col" style="width: 50px">
						<span data-ng-repeat="random3 in [random3]"
							data-ng-switch="random3"> <i data-ng-switch-when="0"
							class="w3-xxlarge fa fa-filter" aria-hidden="true"></i> <i
							data-ng-switch-when="1" class="w3-xxlarge fa fa-search"
							aria-hidden="true"></i> <i data-ng-switch-when="2"
							class="w3-xxlarge fa fa-pencil"></i>
						</span>
					</div>
					<div class="w3-rest">
						<input class="w3-input w3-border" name="message" type="text"
							data-ng-model="patientList.seek" placeholder="Пошук">
					</div>
				</div>
			</caption>
			<tr class="w3-tiny w3-gray">
				<th data-ng-repeat="(ck,cv) in o.col_keys" title="{{ck}}"
					data-ng-switch="cv">{{cv}}</th>
			</tr>
			<tr data-ng-repeat="tr in o.pl.list">
				<td data-ng-repeat="(ck,cv) in o.col_keys" data-ng-switch="ck"
					class="w3-border w3-border-white w3-hover-border-gray">
					<div data-ng-switch-when="col_236"
						title="{{tr[ck] | date : 'longDate'}}">{{tr[ck] | date :
						'shortDate' }} {{tr[ck] | date : 'HH:mm'}}</div>
					<div data-ng-switch-when="col_240">
						<div data-ng-include="'/f/patient-modal2.html'"></div>
					</div>
					<div data-ng-switch-when="col_242" title="{{tr.col_415}}"
						data-ng-bind-html="highlight(tr[ck], patientList.seek)"></div>
					<div data-ng-switch-default
						data-ng-bind-html="highlight(tr[ck], patientList.seek)"></div>
				</td>
			</tr>
		</table>

	</div>

	<div data-ng-style="pageVar.ngStyleModal" class="w3-modal">
		<div class="w3-modal-content">

			<div class="w3-container">
				<div class="w3-row-padding w3-border-bottom">
					<div class="w3-col m4 l4 s4 ">
						<button class="w3-border" data-ng-click="pageVar.saveUpdate()">OK
							сплата друк</button>
						<button class="w3-border"
							ng-click="pageVar.ngStyleModal={display:'none'}">Cancel</button>
					</div>
					<div class="w3-col m8 l8 s8 ">
						<div data-ng-include="pageVar.o.ngIncludes.modalBottonPanel"></div>
					</div>
				</div>

				<span data-ng-click="pageVar.ngStyleModal={display:'none'}"
					class="w3-button w3-display-topright">&times;</span>
				<p data-ng-if="!pageVar.o">Не вибрані дані для редагування.</p>
				<p data-ng-if="pageVar.o">|{{pageVar.o.col_237}} |
					{{pageVar.o.col_238}} |
					{{pageVar.o.col_240}} | {{pageVar.o.col_241}} |
					</p>
				<div class="w3-row">
					<div class="w3-half w3-container "></div>
					<div class="w3-half">
						<span class="w3-tiny am-b">Обстеження:</span>
						{{pageVar.o.col_239}}
					</div>
				</div>
				<div class="w3-row">
					<div class="w3-half w3-container ">
						Вартість: <input data-ng-model="pageVar.price"
							class="w3-border w3-right">
					</div>
					<div class="w3-half">
						<span class="w3-tiny"
							ng-repeat="o in priceCalcHelpData.examination.list">
							<a ng-click="pageVar.price=o.value" class="w3-btn w3-hover-shadow w3-padding-small" href="#"
							title="{{o.cnt}}"> {{o.value}} </a>
						</span>
					</div>
				</div>
				<div class="w3-row">
					<div class="w3-half w3-container ">
						Скидка (%): <input data-ng-model="pageVar.procent"
							class="w3-border w3-right">
					</div>
					<div class="w3-half">
						<span class="w3-tiny"
							ng-repeat="o in priceCalcHelpData.destination.list"> <a
							ng-click="pageVar.procent=o.value"
							class="w3-btn w3-hover-shadow w3-padding-small" href="#"
							title="{{o.cnt}}"> {{o.value}} </a>
						</span>
					</div>
				</div>
				<div class="w3-row">
					<div class="w3-half w3-container ">
						До сплати: <span class="am-b">
							{{pageVar.price-(pageVar.price*pageVar.procent/100)}} </span>
					</div>
					<div class="w3-half">
						<span class="w3-tiny am-b">Направлення:</span>
						{{pageVar.o.col_242}}
					</div>
				</div>
				{{pageVar.payment_privilege}}
				<div>
					Пільги: <select ng-model="pageVar.payment_privilege">
						<option ng-repeat="x in pageVar.payment_privileges"
							value="{{x.name}}">{{x.name}}</option>
					</select>
				</div>
				<p>&nbsp;</p>
			</div>
		</div>
	</div>

</body>
</html>